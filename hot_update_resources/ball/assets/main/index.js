System.register("chunks:///_virtual/update-value-label.ts",["cc"],(function(t){"use strict";var i,s,a;return{setters:[function(t){i=t.cclegacy,s=t._decorator,a=t.Label}],execute:function(){var e;i._RF.push({},"02566VN0PhN8o7NqZg0WyFs","update-value-label",void 0);const{ccclass:r,property:h}=s;t("UpdateValueLabel",r("UpdateValueLabel")(e=class extends a{constructor(...t){super(...t),this.isPlaying=!1,this.startVal=0,this.endVal=0,this.diffVal=0,this.currTime=0,this.changingTime=0}start(){}playUpdateValue(t,i,s){this.startVal=t,this.endVal=i,this.diffVal=this.endVal-this.startVal,this.currTime=0,this.changingTime=s,this.string=t.toString(),this.isPlaying=!0}update(t){if(this.isPlaying){if(this.currTime<this.changingTime){this.currTime+=t;var i=this.startVal+parseInt((this.currTime/this.changingTime*this.diffVal).toString());return i<this.startVal?i=this.startVal:i>this.endVal&&(i=this.endVal),void(this.string=`${i}`)}this.string=`${this.endVal}`,this.isPlaying=!1}}})||e);i._RF.pop()}}}));

System.register("chunks:///_virtual/NetworkHelper.ts",["cc","./GameManager.ts","./HttpHelper.ts"],(function(e){"use strict";var t,r,n;return{setters:[function(e){t=e.cclegacy},function(e){r=e.default},function(e){n=e.default}],execute:function(){t._RF.push({},"18bbeQdrYdPKa2AMLqCOz8O","NetworkHelper",void 0);class s{constructor(){r.logHelper.log(" NetworkHelper 启动... "),this.http=n.sharedInstance()}static sharedInstance(){return this.networkHelper||(this.networkHelper=new s),this.networkHelper}}e("default",s),t._RF.pop()}}}));

System.register("chunks:///_virtual/board-manager.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./constants.ts","./utils.ts"],(function(t){"use strict";var i,s,n,o,e,r,a,d,_,h;return{setters:[function(t){i=t.cclegacy,s=t.Vec3,n=t.Prefab,o=t._decorator,e=t.Component,r=t.instantiate},function(t){a=t.applyDecoratedDescriptor,d=t.initializerDefineProperty},function(t){_=t.Constants},function(t){h=t.utils}],execute:function(){var c,m,p,l,D,S,b;i._RF.push({},"2a0a0QivvtEZodpOZ79qMFb","board-manager",void 0);const{ccclass:u,property:N}=o,P=new s,f=new s;t("BoardManager",(c=u("BoardManager"),m=N(n),p=N(n),c((S=a((D=class extends e{constructor(...t){super(...t),d(this,"boardPrefab",S,this),d(this,"diamondPrefab",b,this),this.diamondSprintList=[],this.diamondCenterX=0,this._boardList=[],this._boardInsIdx=0}start(){this.initBoard(),this.initDiamond()}reset(){this._boardInsIdx=0,_.game.initFirstBoard=!1;let t,i=_.BOARD_INIT_POS.clone();const s=_.BOARD_TYPE.NORMAL;for(let n=0;n<_.BOARD_NUM;n++)t=this._boardList[n],t.reset(s,i,1),i=this.getNextPos(t,1);if(t=this._boardList[0],t.isActive=!0,_.game.ball.currBoard=t,this.diamondSprintList[0])for(var n=0;n<_.DIAMOND_NUM;n++)this.diamondSprintList[n].active=!1}initBoard(){for(let t=0;t<_.BOARD_NUM;t++){const t=r(this.boardPrefab);t.name=this._boardInsIdx.toString(),this._boardInsIdx++,this.node.addChild(t);const i=t.getComponent("Board");this._boardList.push(i)}this.reset()}newBoard(t,i){const s=this._boardList[_.BOARD_NUM-1],n=this.getNextPos(s,i,P),o=this._boardList.shift();t===_.BOARD_TYPE.SPRINT?(this.diamondCenterX=n.x,this.setDiamond(n),o.reset(t,n,0)):o.reset(t,n,i),o.name=this._boardInsIdx.toString(),this._boardInsIdx++,this._boardList.push(o)}getNextPos(t,i,s){const n=s?s.set(t.node.position):t.node.position.clone(),o=h.getDiffCoeff(i,1,2);return n.x=(Math.random()-.5)*_.SCENE_MAX_OFFSET_X*o,t.type===_.BOARD_TYPE.SPRINT&&(n.y+=_.BOARD_GAP_SPRINT,n.x=t.node.position.x),t.type===_.BOARD_TYPE.SPRING?n.y+=_.BOARD_GAP_SPRING:n.y+=_.BOARD_GAP,n}initDiamond(){for(let t=0;t<_.DIAMOND_NUM;t++)this.diamondSprintList[t]=r(this.diamondPrefab),this.node.addChild(this.diamondSprintList[t]),this.diamondSprintList[t].active=!1}setDiamond(t){const i=t.clone();i.y+=_.BALL_JUMP_STEP_SPRINT*_.DIAMOND_START_FRAME;for(let t=0;t<_.DIAMOND_NUM;t++)this.setNextDiamondPos(i),this.diamondSprintList[t].setPosition(i),this.diamondSprintList[t].active=!0}newDiamond(){f.set(this.diamondSprintList[_.DIAMOND_NUM-1].position),this.setNextDiamondPos(f);const t=this.diamondSprintList.shift();t.setPosition(f),t.active=!0,this.diamondSprintList.push(t)}clearDiamond(){for(let t=0;t<_.DIAMOND_NUM;t++)this.diamondSprintList[t].active=!1}setNextDiamondPos(t){t.y+=_.DIAMOND_SPRINT_STEP_Y,t.x+=1.5*(Math.random()-.5),t.x>this.diamondCenterX+_.SCENE_MAX_OFFSET_X?t.x=this.diamondCenterX+_.SCENE_MAX_OFFSET_X:t.x<this.diamondCenterX-_.SCENE_MAX_OFFSET_X&&(t.x=this.diamondCenterX-_.SCENE_MAX_OFFSET_X)}getBoardList(){return this._boardList}getDiamondSprintList(){return this.diamondSprintList}}).prototype,"boardPrefab",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=a(D.prototype,"diamondPrefab",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l=D))||l));i._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["cc","./StorageHelper.ts","./UtillHelper.ts","./LogerHelper.ts","./HotUpdateHelper.ts"],(function(e){"use strict";var t,a,r,n,s;return{setters:[function(e){t=e.cclegacy},function(e){a=e.default},function(e){r=e.default},function(e){n=e.default},function(e){s=e.default}],execute:function(){t._RF.push({},"2d3c1Do4PtLzIw/dm/1Z+DA","GameManager",void 0);class c{constructor(){this.initHelpers()}static drive(){return c.gameManager||(c.gameManager=new c),c.gameManager}initHelpers(){c.logHelper=n.sharedInstance(),c.utilHelper=r.sharedInstance(),c.hotUpdateHelper=s.sharedInstance(),c.storageHelper=a.sharedInstance()}static stop(){}}e("default",c),t._RF.pop()}}}));

System.register("chunks:///_virtual/page-result.ts",["cc","./update-value-label.ts","./_rollupPluginModLoBabelHelpers.js","./constants.ts","./revive.ts"],(function(e){"use strict";var t,s,i,r,o,n,a,l,u;return{setters:[function(e){t=e.cclegacy,s=e.Node,i=e._decorator,r=e.Component},function(e){o=e.UpdateValueLabel},function(e){n=e.applyDecoratedDescriptor,a=e.initializerDefineProperty},function(e){l=e.Constants},function(e){u=e.Revive}],execute:function(){var h,c,p,g,d,b,E,T,f,m,y;t._RF.push({},"31b007MqixM3YyJROFsTMEh","page-result",void 0);const{ccclass:P,property:D}=i;e("PageResult",(h=P("PageResult"),c=D({type:o}),p=D(s),g=D(s),d=D(s),h((T=n((E=class extends r{constructor(...e){super(...e),a(this,"scoreLabel",T,this),this.targetProgress=0,a(this,"nodeTips1",f,this),a(this,"nodeTips2",m,this),a(this,"result",y,this)}init(){this.targetProgress=0,this.scoreLabel.playUpdateValue(this.targetProgress,this.targetProgress,0),this.scoreLabel.isPlaying=!1}onEnable(){l.game.node.on(l.GAME_EVENT.HIDETIPS,this.hideTips,this),l.game.node.on(l.GAME_EVENT.ADDSCORE,this.addScore,this),l.game.node.on(l.GAME_EVENT.DYING,this.gameDie,this),this.showTips(!0),this.showResult(!1),this.init()}start(){this.result.getComponent(u).pageResult=this}onDisable(){l.game.node.off(l.GAME_EVENT.HIDETIPS,this.hideTips,this),l.game.node.off(l.GAME_EVENT.ADDSCORE,this.addScore,this)}addScore(e){this.targetProgress=e;let t=Number(this.scoreLabel.string);this.scoreLabel.playUpdateValue(t,this.targetProgress,(this.targetProgress-t)/20)}gameDie(){this.showTips(!1),this.showResult(!0)}showTips(e){this.nodeTips1.active=e,this.nodeTips2.active=e}hideTips(){this.showTips(!1)}showResult(e){this.result.active=e}}).prototype,"scoreLabel",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=n(E.prototype,"nodeTips1",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=n(E.prototype,"nodeTips2",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=n(E.prototype,"result",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=E))||b));t._RF.pop()}}}));

System.register("chunks:///_virtual/revive.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./constants.ts"],(function(t){"use strict";var e,i,n,o,r,s,l,u,a;return{setters:[function(t){e=t.cclegacy,i=t.WidgetComponent,n=t.Label,o=t.SpriteComponent,r=t._decorator,s=t.Component},function(t){l=t.applyDecoratedDescriptor,u=t.initializerDefineProperty},function(t){a=t.Constants}],execute:function(){var c,p,h,g,b,w,m,C,f,y,D,v,R;e._RF.push({},"37e87RwLXtA5LwGn6Zuq48u","revive",void 0);const{ccclass:L,property:d}=r;t("Revive",(c=L("Revive"),p=d(i),h=d(n),g=d({type:n}),b=d({type:n}),w=d(o),c((f=l((C=class extends s{constructor(...t){super(...t),this.closeCb=null,u(this,"wgMenu",f,this),u(this,"historyLabel",y,this),u(this,"scoreLabel",D,this),u(this,"progressLabel",v,this),u(this,"spCountDown",R,this),this.pageResult=null}onEnable(){this.show()}show(){const t=a.game.score;this.scoreLabel.string=t.toString(),a.MAX_SCORE<t&&(a.MAX_SCORE=t),this.historyLabel.string=a.MAX_SCORE.toString(),this.countDownTime=5,this.progressLabel.string=this.countDownTime+"",this.currentTime=0,this.spCountDown.fillRange=1,this.isCountDowning=!0}onBtnReviveClick(){this.isCountDowning=!1,a.game.audioManager.playClip(),a.game.node.emit(a.GAME_EVENT.REVIVE),this.pageResult.showResult(!1)}onBtnSkipClick(){a.game.audioManager.playClip(),this.isCountDowning=!1,a.game.gameOver()}update(t){if(!this.isCountDowning)return;this.currentTime+=t;let e=this.countDownTime-this.currentTime;this.progressLabel.string=Math.ceil(e)+"",e<=0&&(e=0,this.isCountDowning=!1,this.onBtnSkipClick());let i=e/this.countDownTime;this.spCountDown.fillRange=i}}).prototype,"wgMenu",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=l(C.prototype,"historyLabel",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=l(C.prototype,"scoreLabel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=l(C.prototype,"progressLabel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=l(C.prototype,"spCountDown",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=C))||m));e._RF.pop()}}}));

System.register("chunks:///_virtual/HotUpdateHelper.ts",["cc","./HotUpdateConfig.ts","./GameManager.ts"],(function(e){"use strict";var t,s,a,l,r;return{setters:[function(e){t=e.sys,s=e.game,a=e.cclegacy},function(e){l=e.default},function(e){r=e.default}],execute:function(){a._RF.push({},"476460LcdxL/r5wdcwSoDvQ","HotUpdateHelper",void 0);class o{constructor(){this.hotUpdateResStoragePath="",r.logHelper.log(" HotUpdateHelper 启动... "),this.assetsManager=null,this.hotUpdateResStoragePath="",this.retryCount=0,this.init()}static sharedInstance(){return o.hotUpdateHelper||(o.hotUpdateHelper=new o),o.hotUpdateHelper}init(){if(!t.isNative)return;this.hotUpdateResStoragePath=(jsb.fileUtils?jsb.fileUtils.getWritablePath():"/")+l.HOT_UPDATE_RES_STORAGE_PATH,r.logHelper.log("热更资源存储路径为："+this.hotUpdateResStoragePath);let e=(e,t)=>{r.logHelper.log("客户端资源版本为："+e+" ，服务器资源版本为："+t);let s=e.split(l.HOP_UPDATE_RES_VERSION_SEPARATOR),a=t.split(l.HOP_UPDATE_RES_VERSION_SEPARATOR);for(let e=0;e<s.length;++e){var o;if(!(null===(o=r.utilHelper)||void 0===o?void 0:o.isNumber(s[e])))return r.logHelper.log("客户端资源版本号格式错误，请检查！"),0}for(let e=0;e<a.length;++e){var g;if(!(null===(g=r.utilHelper)||void 0===g?void 0:g.isNumber(a[e])))return r.logHelper.log("服务端资源版本号格式错误，请检查！"),0}let n=0;n=a.length>s.length?a.length:s.length;for(let e=0;e<n;++e){let t=s[e]?parseInt(s[e]):0;var i=a[e]?parseInt(a[e]):0;if(t!=i)return t-i}return 0};this.assetsManager||(this.assetsManager=new jsb.AssetsManager(l.HOT_UPDATE_LOCAL_MANIFEST_PATH,this.hotUpdateResStoragePath,e)),this.assetsManager.setEventCallback((e=>{switch(e.getEventCode()){case jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:r.logHelper.log("未找到本地 manifest 文件，跳过热更新，进入游戏！"),this.continueGame();break;case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:r.logHelper.log("下载资源比对配置文件失败，跳过热更新，进入游戏!"),this.continueGame();break;case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:r.logHelper.log("解析配置文件失败，跳过热更新，进入游戏！"),this.continueGame();break;case jsb.EventAssetsManager.ERROR_UPDATING:r.logHelper.log("资源 "+e.getAssetId()+" 更新出错，错误信息："+e.getMessage()+" ，跳过热更新，进入游戏！"),this.continueGame();break;case jsb.EventAssetsManager.ERROR_DECOMPRESS:r.logHelper.log("资源解压失败！错误信息为："+e.getMessage()+"，跳过热更新，进入游戏！"),this.continueGame();break;case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:r.logHelper.log("已经是最新版本！进入游戏！"),this.continueGame();break;case jsb.EventAssetsManager.NEW_VERSION_FOUND:r.logHelper.log("发现新版本！开始热更流程！"+e.getAssetId()),setInterval((()=>{this.assetsManager.update()}),5e3);break;case jsb.EventAssetsManager.UPDATE_PROGRESSION:let t=e.getAssetId();if(t!=l.HOT_UPDATE_VERSION_MANIFEST_ASSET_ID&&t!=l.HOT_UPDATE_PROJECT_MANIFEST_ASSET_ID){let t=e.getPercent();t="NaN"==String(t)?0:parseFloat(t.toFixed(2)),r.logHelper.log("更新中, 当前进度为："+t);let s={needHotUpdate:!0,progress:t};this.hotUpdateCallback(s)}break;case jsb.EventAssetsManager.ASSET_UPDATED:r.logHelper.log("资源 "+e.getAssetId()+" 更新完成！");break;case jsb.EventAssetsManager.UPDATE_FINISHED:let s={needHotUpdate:!0,progress:1};this.hotUpdateCallback(s),r.logHelper.log("更新完成, 重启游戏！"),this.restartGame();break;case jsb.EventAssetsManager.UPDATE_FAILED:r.logHelper.log("更新失败！ 错误信息为："+e.getMessage()),this.retryUpdate()}}))}restartGame(){var e;this.assetsManager.setEventCallback(null);let t=jsb.fileUtils.getSearchPaths();t||(t=[]),r.logHelper.log("当前热更资源搜索路径为："),r.logHelper.log(t),0!=t.length&&-1!=t.indexOf(this.hotUpdateResStoragePath)||t.unshift(this.hotUpdateResStoragePath),r.logHelper.log("更新后的搜索路径为："),r.logHelper.log(t),null===(e=r.storageHelper)||void 0===e||e.setItem(l.HOT_UPDATE_RES_SEARCH_PATHS_LOCAL_STORAGE_KEY,t),jsb.fileUtils.setSearchPaths(t),r.stop(),r.logHelper.log("重启游戏！"),s.restart()}retryUpdate(){this.retryCount++,this.retryCount<l.HOT_UPDATE_RETRY_MAX_COUNT?this.assetsManager.downloadFailedAssets():(r.logHelper.log("已达到最大重试次数！"),this.retryCount=0,this.continueGame())}continueGame(){let e={needHotUpdate:!1,progress:100};this.hotUpdateCallback?this.hotUpdateCallback(e):r.logHelper.log("热更回调不存在，请检查！"),this.assetsManager.setEventCallback(null)}checkUpdate(e){if(!t.isNative)return;if(r.logHelper.log("检测热更新..."),!e)return void r.logHelper.log("参数错误，请检查！");this.hotUpdateCallback=e;let s=jsb.fileUtils.getSearchPaths();s||(s=[]),r.logHelper.log("热更资源搜索路径为："),r.logHelper.log(s),this.assetsManager.checkUpdate()}}e("default",o),a._RF.pop()}}}));

System.register("chunks:///_virtual/StorageHelper.ts",["cc","./GameManager.ts"],(function(e){"use strict";var l,t,r;return{setters:[function(e){l=e.sys,t=e.cclegacy},function(e){r=e.default}],execute:function(){t._RF.push({},"4a29aKuprpJvq/yBXVzrayg","StorageHelper",void 0);class o{constructor(){r.logHelper.log(" StorageHelper 启动... ")}static sharedInstance(){return o.storageHelper||(o.storageHelper=new o),o.storageHelper}setItem(e,t){if(null==e||null==e||null==t||null==t)return void r.logHelper.log("参数异常，请检查");let o="";o="object"==typeof t?JSON.stringify(t):t+"",l.localStorage.setItem(e,o)}getItem(e){if(null==e||null==e)return r.logHelper.log("参数异常，请检查"),"";let t=l.localStorage.getItem(e);return t||(t=""),t}removeItem(e){null!=e&&null!=e?l.localStorage.removeItem(e):r.logHelper.log("参数异常，请检查")}clear(){l.localStorage.clear()}}e("default",o),t._RF.pop()}}}));

System.register("chunks:///_virtual/ui-manager.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./constants.ts"],(function(e){"use strict";var t,a,r,i,n,s,o;return{setters:[function(e){t=e.cclegacy,a=e.Node,r=e._decorator,i=e.Component},function(e){n=e.applyDecoratedDescriptor,s=e.initializerDefineProperty},function(e){o=e.Constants}],execute:function(){var c,u,l,p,g,f,h;t._RF.push({},"4becfUEfe1C2prK7h8zxNvz","ui-manager",void 0);const{ccclass:b,property:v}=r;e("UIManager",(c=b("UIManager"),u=v(a),l=v(a),c((f=n((g=class extends i{constructor(...e){super(...e),s(this,"pageStart",f,this),s(this,"pageResult",h,this)}onLoad(){o.game.uiManager=this}start(){this.pageResult.active=!1}showDialog(e,...t){this.pageResult.active=!e,this.pageStart.active=e}}).prototype,"pageStart",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=n(g.prototype,"pageResult",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=g))||p));t._RF.pop()}}}));

System.register("chunks:///_virtual/audio-manager.ts",["cc","./_rollupPluginModLoBabelHelpers.js"],(function(i){"use strict";var t,o,e,r,a,n,u;return{setters:[function(i){t=i.cclegacy,o=i.AudioClip,e=i._decorator,r=i.Component,a=i.AudioSource},function(i){n=i.applyDecoratedDescriptor,u=i.initializerDefineProperty}],execute:function(){var l,s,c,p,d,h,g;t._RF.push({},"52ff6Qg0MlJaaUpLNS1HPTJ","audio-manager",void 0);const{ccclass:m,property:f}=e;i("AudioManager",(l=m("AudioManager"),s=f(o),c=f(o),l((h=n((d=class extends r{constructor(...i){super(...i),u(this,"bg",h,this),u(this,"click",g,this),this.audioComp=null}start(){this.audioComp=this.getComponent(a)}playSound(i=!0){i?(this.audioComp.clip=this.bg,this.audioComp.play()):this.audioComp.stop()}playClip(){this.audioComp.playOneShot(this.click)}}).prototype,"bg",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=n(d.prototype,"click",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=d))||p));t._RF.pop()}}}));

System.register("chunks:///_virtual/UtillHelper.ts",["cc","./GameManager.ts"],(function(e){"use strict";var t,r;return{setters:[function(e){t=e.cclegacy},function(e){r=e.default}],execute:function(){t._RF.push({},"5f6bbyi9P9DoLFfVFgR1hie","UtillHelper",void 0);class l{constructor(){r.logHelper.log(" UtillHelper 启动... ")}static sharedInstance(){return l.utilHelper||(l.utilHelper=new l),l.utilHelper}shuffle(e){if(!e||e.length<=0)return;let t=-1,r=e.length,l=r-1;for(;++t<r;){let r=t+Math.floor(Math.random()*(l-t+1)),n=e[r];e[r]=e[t],e[t]=n}return e}checkItemNumInArray(e,t){let r=0,l=0;for(let l=0;l<t.length;++l)t[l]==e&&r++;return l=4-r,l<0&&(l=0),l}verifyEmailFormat(e){let t=!1;return new RegExp("^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$").test(e)&&(t=!0),t}isJsonObject(e){if(!e)return r.logHelper.log("isJsonObject 方法参数异常，请检查"),!1;let t=!1;try{let r=JSON.parse(e);r&&"object"==typeof r&&(t=!0)}catch(e){t=!1}return t}isNumber(e){return e?!isNaN(e):(r.logHelper.log("isNumber 方法 参数异常，请检查"),!1)}}e("default",l),t._RF.pop()}}}));

System.register("chunks:///_virtual/HttpHelper.ts",["cc","./NetworkConfig.ts"],(function(t){"use strict";var e,s;return{setters:[function(t){e=t.cclegacy},function(t){s=t.default}],execute:function(){e._RF.push({},"66a5cCJmEhA6bVG5KnCpSq0","HttpHelper",void 0);class o{constructor(){this.xhr=new XMLHttpRequest,this.lastRequestPath="",this.lastRequestData=null,this.lastSendRequestTime=0,this.lastReceiveResponseTime=0,this.reconnectCount=0}static sharedInstance(){return null==this.httpHelper&&(this.httpHelper=new o),this.httpHelper}sendGetRequest(t,e,o){if(!t)return void console.log("参数异常，请检查！");this.xhr.timeout=s.HTTP_TIMOUT,e||(e={}),this.lastRequestPath=t,this.lastRequestData=e;let i="?";for(let t in e)"?"!=i&&(i+="&"),i+=t+"="+e[t];let n=s.HTTP_SCHEME+"://"+s.DYNAMIC_HTTP_HOST+":"+s.DYNAMIC_HTTP_PORT+t+encodeURI(i);console.log("====== 向 "+s.DYNAMIC_HTTP_HOST+":"+s.DYNAMIC_HTTP_PORT+" 发送 GET 请求！======"),console.log("请求 url 为： "+n),this.xhr.onreadystatechange=()=>{if(4==this.xhr.readyState)if(console.log("xhr 状态码为: "+this.xhr.status),this.xhr.status>=200&&this.xhr.status<300){this.reconnectCount=0,this.lastReceiveResponseTime=Date.now();let e=this.xhr.responseText;console.log("接口 "+t+" 返回数据为："+e+" ，耗时 "+(this.lastReceiveResponseTime-this.lastSendRequestTime)+" ms");try{let t=JSON.parse(e);t&&(o?o(t):console.log("处理器不存在，请检查！"))}catch(t){return void console.log("解析响应数据出错，错误信息为："+t)}}else console.log("未能正确响应，重新向接口 "+t+" 发送请求！"),setTimeout((()=>{this.retry()}),s.HTTP_RETRY_INTERVAL)},this.xhr.onerror=()=>{console.log("请求接口 "+this.lastRequestPath+" 出错，请检查！")},this.xhr.ontimeout=()=>{this.retry()},this.xhr.open("GET",n,!0),this.xhr.send(),this.lastSendRequestTime=Date.now()}sendPostRequest(t,e){}retry(){this.reconnectCount++,console.log("请求超时，当前重试次数为："+this.reconnectCount),this.xhr.abort(),this.sendGetRequest(this.lastRequestPath,this.lastRequestData)}}t("default",o),e._RF.pop()}}}));

System.register("chunks:///_virtual/game.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./constants.ts","./board-manager.ts","./ui-manager.ts","./audio-manager.ts","./ball.ts","./camera-ctrl.ts"],(function(e){"use strict";var t,a,i,r,s,n,o,l,h,u,c,g,E;return{setters:[function(e){t=e.cclegacy,a=e.Prefab,i=e._decorator,r=e.Component,s=e.instantiate},function(e){n=e.applyDecoratedDescriptor,o=e.initializerDefineProperty},function(e){l=e.Constants},function(e){h=e.BoardManager},function(e){u=e.UIManager},function(e){c=e.AudioManager},function(e){g=e.Ball},function(e){E=e.CameraCtrl}],execute:function(){var d,b,m,f,p,A,M,T,v,_,R,G,S;t._RF.push({},"6b6999+5cFK4K47RCoawnB4","game",void 0);const{ccclass:y,property:D}=i;e("Game",(d=y("Game"),b=D(a),m=D(h),f=D(E),p=D(u),A=D(c),d((v=n((T=class extends r{constructor(...e){super(...e),o(this,"ballPref",v,this),o(this,"boardManager",_,this),o(this,"cameraCtrl",R,this),o(this,"uiManager",G,this),o(this,"audioManager",S,this),this.initFirstBoard=!1,this.state=l.GAME_STATE.READY,this.score=0,this.hasRevive=!1,this._ball=null}get ball(){return this._ball}__preload(){l.game=this}onLoad(){if(!this.ballPref)return console.log("There is no ball!!"),void(this.enabled=!1);const e=s(this.ballPref);e.parent=this.node.parent,this._ball=e.getComponent(g)}start(){this.node.on(l.GAME_EVENT.RESTART,this.gameStart,this),this.node.on(l.GAME_EVENT.REVIVE,this.gameRevive,this)}onDestroy(){this.node.off(l.GAME_EVENT.RESTART,this.gameStart,this),this.node.off(l.GAME_EVENT.REVIVE,this.gameRevive,this)}resetGame(){this.state=l.GAME_STATE.READY,this._ball.reset(),this.cameraCtrl.reset(),this.boardManager.reset(),this.uiManager.showDialog(!0)}gameStart(){this.audioManager.playSound(),this.uiManager.showDialog(!1),this.state=l.GAME_STATE.PLAYING,this.hasRevive=!1,this.score=0}gameDie(){this.audioManager.playSound(!1),this.state=l.GAME_STATE.PAUSE,this.hasRevive?this.gameOver():this.node.emit(l.GAME_EVENT.DYING,(()=>{this.gameOver()}))}gameOver(){this.state=l.GAME_STATE.OVER,this.audioManager.playSound(!1),this.resetGame()}gameRevive(){this.hasRevive=!0,this.state=l.GAME_STATE.READY,this.ball.revive(),this.scheduleOnce((()=>{this.audioManager.playSound(),this.state=l.GAME_STATE.PLAYING}),1)}addScore(e){this.score+=e,this.node.emit(l.GAME_EVENT.ADDSCORE,this.score)}}).prototype,"ballPref",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=n(T.prototype,"boardManager",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=n(T.prototype,"cameraCtrl",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=n(T.prototype,"uiManager",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=n(T.prototype,"audioManager",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=T))||M));t._RF.pop()}}}));

System.register("chunks:///_virtual/page-start.ts",["cc","./constants.ts"],(function(t){"use strict";var e,a,s,c;return{setters:[function(t){e=t.cclegacy,a=t.Component,s=t._decorator},function(t){c=t.Constants}],execute:function(){var n;e._RF.push({},"75579oVThhNcJN3jNLu42YC","page-start",void 0);const{ccclass:r,property:o}=s;t("PageStart",r("PageStart")(n=class extends a{gameStart(){c.game.node.emit(c.GAME_EVENT.RESTART),c.game.audioManager.playClip()}})||n);e._RF.pop()}}}));

System.register("chunks:///_virtual/LogerHelper.ts",["cc"],(function(e){"use strict";var r,t;return{setters:[function(e){r=e.log,t=e.cclegacy}],execute:function(){t._RF.push({},"81f98DIwlBD84eAsVKCUMMY","LogerHelper",void 0);class l{constructor(){}static sharedInstance(){return l.logHelper||(l.logHelper=new l,l.logHelper.log(" LogHelper 启动... ")),l.logHelper}log(e){r(e)}}e("default",l),t._RF.pop()}}}));

System.register("chunks:///_virtual/migrate-canvas.ts",["cc"],(function(){"use strict";var e,t,n,i,o,r,a;return{setters:[function(c){e=c.cclegacy,t=c.director,n=c.Director,i=c.Canvas,o=c.Camera,r=c.game,a=c.Node}],execute:function(){e._RF.push({},"8a9552q+NRLy4Ru4WllseaG","migrate-canvas",void 0);const c=1048575;function l(e,t){for(let n=0,i=e.children.length;n<i;n++)e.children[n].layer=t,l(e.children[n],t)}t.on(n.EVENT_AFTER_SCENE_LAUNCH,(()=>{var e,n,a;const s=null===(e=t.getScene())||void 0===e?void 0:e.children;let m=null===(n=t.getScene())||void 0===n?void 0:n.getComponentsInChildren(i);if(m.length<=1)return;m=m.filter((e=>!!e.cameraComponent));let p=null===(a=t.getScene())||void 0===a?void 0:a.getComponentsInChildren(o),d=0;p.forEach((e=>d|=e.visibility&c));const u=[];for(let e=0,t=s.length;e<t;e++){const t=s[e];if(!r.isPersistRootNode(t))continue;const n=t.getComponentsInChildren(i);0!==n.length&&u.push(...n.filter((e=>!!e.cameraComponent)))}u.forEach((e=>{if(m.find((t=>t!==e&&t.cameraComponent.visibility&e.cameraComponent.visibility&c))){const t=~d,n=t&~(t-1);e.cameraComponent.visibility=n|4293918720&e.cameraComponent.visibility,l(e.node,n),d|=t}}))}));let s=a.prototype.setParent;function m(e){let t=0,n=e.getComponent(i);return n&&n.cameraComponent?(t=n.cameraComponent.visibility&n.node.layer?n.node.layer:n.cameraComponent.visibility&~(n.cameraComponent.visibility-1),t):(e.parent&&(t=m(e.parent)),t)}a.prototype.setParent=function(e,t){if(s.call(this,e,t),!e)return;let n=m(this);n&&(this.layer=n,l(this,n))},e._RF.pop()}}}));

System.register("chunks:///_virtual/HotUpdateConfig.ts",["cc"],(function(_){"use strict";var T;return{setters:[function(_){T=_.cclegacy}],execute:function(){T._RF.push({},"8c0f8j5d4VNWKmYORzo6uR8","HotUpdateConfig",void 0);class E{}_("default",E),E.HOT_UPDATE_LOCAL_MANIFEST_PATH="project.manifest",E.HOT_UPDATE_RES_STORAGE_PATH="hot_update_res/",E.HOP_UPDATE_RES_VERSION_SEPARATOR=".",E.HOT_UPDATE_RETRY_MAX_COUNT=10,E.HOT_UPDATE_RES_SEARCH_PATHS_LOCAL_STORAGE_KEY="HOT_UPDATE_RES_SEARCH_PATHS_LOCAL_STORAGE_KEY",E.HOT_UPDATE_VERSION_MANIFEST_ASSET_ID="@version",E.HOT_UPDATE_PROJECT_MANIFEST_ASSET_ID="@manifest",T._RF.pop()}}}));

System.register("chunks:///_virtual/ball.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./constants.ts","./utils.ts","./pool-manager.ts"],(function(t){"use strict";var i,s,e,o,r,a,n,h,u,c,P,d,_,m,A,p,S;return{setters:[function(t){i=t.cclegacy,s=t.Vec3,e=t.Prefab,o=t._decorator,r=t.Component,a=t.Node,n=t.ParticleUtils,h=t.find,u=t.Camera,c=t.Label,P=t.Animation,d=t.ParticleSystem},function(t){_=t.applyDecoratedDescriptor,m=t.initializerDefineProperty},function(t){A=t.Constants},function(t){p=t.utils},function(t){S=t.PoolManager}],execute:function(){var l,T,E,B,R,L,M,g,O;i._RF.push({},"900c8pQ81tCcrbRdvi9SxTB","ball",void 0);const{ccclass:f,property:N}=o,D=new s;t("Ball",(l=f("Ball"),T=N(e),E=N({type:e}),B=N({type:e}),l((M=_((L=class extends r{constructor(...t){super(...t),m(this,"diamondParticlePrefab",M,this),m(this,"scoreAniPrefab",g,this),m(this,"trail02Prefab",O,this),this.currBoard=null,this.boardCount=0,this.jumpState=A.BALL_JUMP_STATE.JUMPUP,this.currBoardIdx=0,this.diffLevel=1,this.currJumpFrame=0,this.hasSprint=!1,this.isTouch=!1,this.touchPosX=0,this.movePosX=0,this.isJumpSpring=!1,this.boardGroupCount=0,this.trailNode=null,this.timeScale=0,this._wPos=new s}start(){A.game.node.on(a.EventType.TOUCH_START,this.onTouchStart,this),A.game.node.on(a.EventType.TOUCH_END,this.onTouchEnd,this),A.game.node.on(a.EventType.TOUCH_MOVE,this.onTouchMove,this),A.game.node.on(A.GAME_EVENT.RESTART,this.gameStart,this),this.updateBall(),this.reset()}onDestroy(){A.game.node.off(a.EventType.TOUCH_START,this.onTouchStart,this),A.game.node.off(a.EventType.TOUCH_END,this.onTouchEnd,this),A.game.node.off(a.EventType.TOUCH_MOVE,this.onTouchMove,this),A.game.node.off(A.GAME_EVENT.RESTART,this.gameStart,this)}update(t){if(this.timeScale=Math.floor(t/A.normalDt*100)/100,A.game.state===A.GAME_STATE.PLAYING){const t=A.game.boardManager,i=t.getBoardList();if(this.jumpState===A.BALL_JUMP_STATE.SPRINT){this.currJumpFrame>A.BALL_JUMP_FRAMES_SPRINT&&(this.jumpState=A.BALL_JUMP_STATE.JUMPUP,this.isJumpSpring=!1,this.currJumpFrame=0,this.hasSprint=!1,t.clearDiamond()),this.currJumpFrame+=this.timeScale;const i=t.getDiamondSprintList();for(let t=0;t<A.DIAMOND_NUM;t++)Math.abs(this.node.position.y-i[t].position.y)<=A.DIAMOND_SPRINT_SCORE_AREA&&Math.abs(this.node.position.x-i[t].position.x)<=A.DIAMOND_SPRINT_SCORE_AREA&&(A.game.addScore(A.DIAMOND_SCORE),this.showScore(A.DIAMOND_SCORE),A.game.ball.playDiamondParticle(this.node.position),i[t].active=!1);this.setPosY(),this.setPosX(),this.touchPosX=this.movePosX;const s=this.node.position.y+A.CAMERA_OFFSET_Y_SPRINT;A.game.cameraCtrl.setOriginPosY(s)}else{for(let t=this.currBoardIdx+1;t>=0;t--){const s=i[t],e=this.node.position,o=i[t].node.position;if(Math.abs(e.x-o.x)<=i[t].getRadius()&&Math.abs(e.y-(o.y+A.BOARD_HEIGTH))<=A.DIAMOND_SCORE_AREA&&i[t].checkDiamond(e.x),this.jumpState===A.BALL_JUMP_STATE.FALLDOWN){if(this.currJumpFrame>A.PLAYER_MAX_DOWN_FRAMES||this.currBoard.node.position.y-e.y-(A.BOARD_GAP+A.BOARD_HEIGTH)>.001)return n.stop(this.trailNode),void A.game.gameDie();if(this.isOnBoard(s)){this.currBoard=s,this.currBoardIdx=t,this.activeCurrBoard();break}}}this.currJumpFrame+=this.timeScale,this.jumpState===A.BALL_JUMP_STATE.JUMPUP&&(this.isJumpSpring&&this.currJumpFrame>=A.BALL_JUMP_FRAMES_SPRING||!this.isJumpSpring&&this.currJumpFrame>=A.BALL_JUMP_FRAMES)&&(this.jumpState=A.BALL_JUMP_STATE.FALLDOWN,this.currJumpFrame=0),this.setPosY(),this.setPosX(),this.currBoard.type!==A.BOARD_TYPE.SPRINT&&A.game.cameraCtrl.setOriginPosX(this.node.position.x),this.touchPosX=this.movePosX}this.setTrailPos()}}onTouchStart(t,i){this.isTouch=!0,this.touchPosX=t.getLocation().x,this.movePosX=this.touchPosX}onTouchMove(t,i){this.movePosX=t.getLocation().x}onTouchEnd(t,i){this.isTouch=!1}gameStart(){this.playTrail()}reset(){this.boardCount=0,this.diffLevel=1,D.set(A.BOARD_INIT_POS),D.y+=A.BALL_RADIUS+A.BOARD_HEIGTH/2-.001,this.node.setPosition(D),this.node.eulerAngles=new s,this.currJumpFrame=0,this.jumpState=A.BALL_JUMP_STATE.FALLDOWN,this.hasSprint=!1,this.currBoardIdx=0,this.show(),this.setTrailPos()}updateBall(){this.trailNode=S.instance.getNode(this.trail02Prefab,this.node.parent)}show(){this.node.active=!0}hide(){this.node.active=!1}activeCurrBoard(){const t=this.node.position,i=this.currBoard.node.position,s=this.currBoard.type,e=i.y+A.BALL_RADIUS+this.currBoard.getHeight()/2-.01;if(this.node.setPosition(t.x,e,t.z),this.currJumpFrame=0,s===A.BOARD_TYPE.SPRINT?(this.jumpState=A.BALL_JUMP_STATE.SPRINT,A.game.cameraCtrl.setOriginPosX(i.x)):this.jumpState=A.BALL_JUMP_STATE.JUMPUP,!this.currBoard.isActive){this.currBoard.isActive=!0;let e=A.SCORE_BOARD_NOT_CENTER;(s!==A.BOARD_TYPE.NORMAL&&s!==A.BOARD_TYPE.DROP||Math.abs(t.x-i.x)<=A.BOARD_RADIUS_CENTER)&&(e=A.SCORE_BOARD_CENTER),A.game.addScore(e),this.showScore(e),this.boardCount++,5===this.boardCount&&A.game.node.emit(A.GAME_EVENT.HIDETIPS),this.diffLevel+=e/2;for(let t=this.currBoardIdx-A.BOARD_NEW_INDEX;t>0;t--)this.newBoard()}this.isJumpSpring=s===A.BOARD_TYPE.SPRING,this.currBoard.setBump(),this.currBoard.setWave(),s!=A.BOARD_TYPE.SPRING&&s!=A.BOARD_TYPE.SPRINT||this.currBoard.setSpring();const o=A.game.boardManager.getBoardList();if(s===A.BOARD_TYPE.DROP)for(let t=0;t<this.currBoardIdx;t++)o[t].setDrop();const r=i.y+A.CAMERA_OFFSET_Y;A.game.cameraCtrl.setOriginPosY(r),A.game.cameraCtrl.preType=s}newBoard(){let t=A.BOARD_TYPE.NORMAL;if(this.boardGroupCount<=0){const i=p.getDiffCoeff(this.diffLevel,1,10),s=Math.random()*i;s<4.2?(t=A.BOARD_TYPE.NORMAL,this.boardGroupCount=2):s<=5.5?(t=A.BOARD_TYPE.GIANT,this.boardGroupCount=3):s<=6.2?(t=A.BOARD_TYPE.SPRING,Math.random()>.5&&(this.boardGroupCount=2)):s<=7?(t=A.BOARD_TYPE.DROP,this.boardGroupCount=3):s<=7.5&&!1===this.hasSprint?(t=A.BOARD_TYPE.SPRINT,this.hasSprint=!0):t=A.BOARD_TYPE.NORMAL}this.boardGroupCount--,A.game.boardManager.newBoard(t,this.diffLevel)}showScore(t){const i=S.instance.getNode(this.scoreAniPrefab,h("Canvas/resultUI")),e=new s,o=A.game.cameraCtrl.node.getComponent(u);this._wPos.set(this.node.worldPosition),o.convertToUINode(this._wPos,h("Canvas/resultUI"),e),e.x+=50,i.setPosition(e),i.getComponentInChildren(c).string=`+${t}`;const r=i.getComponent(P);r.once(P.EventType.FINISHED,(()=>{S.instance.putNode(i)})),r.play()}setPosX(){if(this.isTouch&&this.touchPosX!==this.movePosX)if(D.set(this.node.position),this.jumpState===A.BALL_JUMP_STATE.SPRINT){let t=(this.movePosX-this.touchPosX)*A.COEFF_POS_BALL;this.node.setPosition(D.x+t,D.y,D.z),D.set(this.node.position),t=D.x;let i=1.3*A.SCENE_MAX_OFFSET_X;const s=this.currBoard.node.position;t>s.x+i?this.node.setPosition(s.x+i,D.y,D.z):t<this.currBoard.node.position.x-i&&this.node.setPosition(s.x-i,D.y,D.z)}else{const t=(this.movePosX-this.touchPosX)*A.COEFF_POS_BALL;this.node.setPosition(D.x+t,D.y,D.z)}}setPosY(){if(D.set(this.node.position),this.jumpState===A.BALL_JUMP_STATE.JUMPUP)this.isJumpSpring?D.y+=A.BALL_JUMP_STEP_SPRING[Math.floor(this.currJumpFrame/3)]*this.timeScale:D.y+=A.BALL_JUMP_STEP[Math.floor(this.currJumpFrame/2)]*this.timeScale,this.node.setPosition(D);else if(this.jumpState===A.BALL_JUMP_STATE.FALLDOWN){if(this.currBoard.type===A.BOARD_TYPE.SPRING)if(this.currJumpFrame<A.BALL_JUMP_FRAMES_SPRING){const t=A.BALL_JUMP_FRAMES_SPRING-this.currJumpFrame-1;D.y-=A.BALL_JUMP_STEP_SPRING[Math.floor((t>=0?t:0)/3)]*this.timeScale}else D.y-=A.BALL_JUMP_STEP_SPRING[0]*this.timeScale;else if(this.currJumpFrame<A.BALL_JUMP_FRAMES){const t=A.BALL_JUMP_FRAMES-this.currJumpFrame-1;D.y-=A.BALL_JUMP_STEP[Math.floor((t>=0?t:0)/2)]*this.timeScale}else D.y-=A.BALL_JUMP_STEP[0]*this.timeScale;this.node.setPosition(D)}else this.jumpState===A.BALL_JUMP_STATE.SPRINT&&(D.y+=A.BALL_JUMP_STEP_SPRINT*this.timeScale,this.node.setPosition(D),this.currJumpFrame>=A.DIAMOND_START_FRAME+20&&this.currJumpFrame<=A.BALL_JUMP_FRAMES_SPRINT-50&&Math.floor(this.currJumpFrame)%Math.floor(A.DIAMOND_SPRINT_STEP_Y/A.BALL_JUMP_STEP_SPRINT)==0&&A.game.boardManager.newDiamond())}isOnBoard(t){const i=this.node.position,s=t.node.position,e=Math.abs(i.x-s.x),o=i.y-s.y;if(e<=t.getRadius()){if(o>=0&&o<=A.BALL_RADIUS+t.getHeight()/2)return!0;if(this.isJumpSpring&&this.currJumpFrame>=A.BALL_JUMP_FRAMES_SPRING){if(Math.abs(o)<A.BALL_JUMP_STEP_SPRING[0])return!0}else if(!this.isJumpSpring&&this.currJumpFrame>=A.BALL_JUMP_FRAMES&&Math.abs(o)<A.BALL_JUMP_STEP[0])return!0}return!1}revive(){this.currBoardIdx--,this.currBoard.type===A.BOARD_TYPE.SPRINT&&(this.currBoardIdx++,this.currBoard=A.game.boardManager.getBoardList()[this.currBoardIdx]),this.currBoard.revive();const t=this.currBoard.node.position.clone();t.y+=A.BALL_RADIUS+this.currBoard.getHeight()/2-.001,this.node.setPosition(t),this.node.eulerAngles=new s(0,0,0),this.currJumpFrame=0,this.show();const i=this.currBoard.node.position.y+A.CAMERA_OFFSET_Y;A.game.cameraCtrl.setOriginPosX(t.x),A.game.cameraCtrl.setOriginPosY(i),this.playTrail(),this.setTrailPos()}playDiamondParticle(t){const i=S.instance.getNode(this.diamondParticlePrefab,this.node.parent);i.setPosition(t);const s=i.getComponent(d);s.play();const e=()=>{s.isPlaying||(S.instance.putNode(i),this.unschedule(e))};this.schedule(e,.1)}playTrail(){n.play(this.trailNode)}setTrailPos(){const t=this.node.position;this.trailNode.setPosition(t.x,t.y-.1,t.z)}}).prototype,"diamondParticlePrefab",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=_(L.prototype,"scoreAniPrefab",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=_(L.prototype,"trail02Prefab",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=L))||R));i._RF.pop()}}}));

System.register("chunks:///_virtual/camera-ctrl.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./constants.ts"],(function(i){"use strict";var s,t,o,e,n,r,_,a;return{setters:[function(i){s=i.cclegacy,t=i.Vec3,o=i.Node,e=i._decorator,n=i.Component},function(i){r=i.applyDecoratedDescriptor,_=i.initializerDefineProperty},function(i){a=i.Constants}],execute:function(){var h,P,c,l,p;s._RF.push({},"b5204GgQaBDNqMtOdI4KDJl","camera-ctrl",void 0);const{ccclass:g,property:A}=e,M=new t;i("CameraCtrl",(h=g("CameraCtrl"),P=A(o),h((p=r((l=class extends n{constructor(...i){super(...i),_(this,"planeNode",p,this),this.preType=a.BOARD_TYPE.NORMAL,this._originPos=new t}start(){this._originPos.set(a.CAMERA_INIT_POS),this.setPosition(this._originPos),this.node.eulerAngles=a.CAMERA_INIT_ROT}setOriginPosX(i){this._originPos.x=i}setOriginPosY(i){this._originPos.y=i}update(){if(M.set(this.node.position),M.x!==this._originPos.x||M.y!==this._originPos.y){if(Math.abs(M.x-this._originPos.x)<=a.CAMERA_MOVE_MINI_ERR)M.x=this._originPos.x,this.setPosition(M);else{const i=this._originPos.x-M.x;M.x+=i/a.CAMERA_MOVE_X_FRAMES,this.setPosition(M)}if(M.set(this.node.position),Math.abs(M.y-this._originPos.y)<=a.CAMERA_MOVE_MINI_ERR)M.y=this._originPos.y,this.setPosition(M);else{const i=this._originPos.y-M.y;this.preType===a.BOARD_TYPE.SPRING?(M.y+=i/a.CAMERA_MOVE_Y_FRAMES_SPRING,this.setPosition(M)):(M.y+=i/a.CAMERA_MOVE_Y_FRAMES,this.setPosition(M))}}}reset(){this._originPos.set(a.CAMERA_INIT_POS),this.setPosition(this._originPos)}setPosition(i){this.node.setPosition(i);const s=i.y-27;this.planeNode.setPosition(i.x,s,-100)}}).prototype,"planeNode",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c=l))||c));s._RF.pop()}}}));

System.register("chunks:///_virtual/board.ts",["cc","./_rollupPluginModLoBabelHelpers.js","./constants.ts","./utils.ts"],(function(i){"use strict";var t,e,s,n,o,r,a,h,p,c,l,d;return{setters:[function(i){t=i.cclegacy,e=i.Vec3,s=i.Prefab,n=i._decorator,o=i.Component,r=i.instantiate,a=i.MeshRenderer,h=i.Color},function(i){p=i.applyDecoratedDescriptor,c=i.initializerDefineProperty},function(i){l=i.Constants},function(i){d=i.utils}],execute:function(){var R,_,g,P,D,S,A,m,v,E,O,u,T;t._RF.push({},"bb50aLcTl1FbpB7Hy0H/DT9","board",void 0);const{ccclass:f,property:B}=n,I=new e;i("Board",(R=f("Board"),_=B(s),g=B({type:s}),P=B({type:s}),D=B({type:s}),S=B({type:s}),R((v=p((m=class extends o{constructor(...i){super(...i),c(this,"diamondPrefab",v,this),c(this,"centerPrefab",E,this),c(this,"wavePrefab",O,this),c(this,"springTopPrefab",u,this),c(this,"springHelixPrefab",T,this),this.isActive=!1,this.diamondList=[],this.type=l.BOARD_TYPE.NORMAL,this.wave=null,this.waveInner=null,this.waveOriginScale=new e,this.currWaveFrame=0,this.currSpringFrame=0,this.currBumpFrame=l.BOARD_BUMP_FRAMES,this.springTop=null,this.springHelix=null,this.springHelixOriginScale=new e,this.center=null,this.isMovingRight=!0,this.hasDiamond=!1,this.isMoving=!1,this.posBeforeDrop=new e,this.originScale=new e,this.currDropFrame=l.BOARD_DROP_FRAMES,this._game=null}onLoad(){this.originScale.set(this.node.scale),this.initCenter(),this.initWave(),this.initSpring(),this.initDiamond()}update(){this.effectBump(),this.effectWave(),this.type!==l.BOARD_TYPE.SPRING&&this.type!==l.BOARD_TYPE.SPRINT||this.effectSpring(),this.effectDrop(),this.effectMove(),this.hasDiamond&&this.effectDiamondRotate()}reset(i,t,e){if(this.isActive=!1,this.type=i,this.node.setPosition(t),this.isMoving=!1,this.currDropFrame=l.BOARD_DROP_FRAMES,this.type!==l.BOARD_TYPE.NORMAL&&this.type!==l.BOARD_TYPE.DROP&&this.type!==l.BOARD_TYPE.SPRING||(this.isMoving=this.setMove(e)),this.type===l.BOARD_TYPE.GIANT?this.node.setScale(this.originScale.x*l.BOARD_SCALE_GIANT,this.originScale.y,this.originScale.z):this.type===l.BOARD_TYPE.DROP?(this.node.setScale(this.originScale.x,this.originScale.y*l.BOARD_HEIGTH_SCALE_DROP,this.originScale.z),this.posBeforeDrop.set(this.node.position)):this.node.setScale(this.originScale),this.springTop.active=!1,this.type!==l.BOARD_TYPE.SPRING&&this.type!==l.BOARD_TYPE.SPRINT||(this.springHelix.active=!0,this.springTop.active=!0,this.setSpringPos()),this.hasDiamond=!1,this.diamondList[0]){for(let i=0;i<5;i++)this.diamondList[i].active=!1;if(this.type===l.BOARD_TYPE.GIANT)for(let i=0;i<5;i++)this.diamondList[i].active=!0,this.hasDiamond=!0;else this.type!==l.BOARD_TYPE.NORMAL&&this.type!==l.BOARD_TYPE.DROP||Math.random()>.7&&(this.diamondList[2].active=l.game.initFirstBoard,l.game.initFirstBoard=!0,this.hasDiamond=!0);this.hasDiamond&&this.setDiamondPos()}}setDrop(){this.currDropFrame=0,this.posBeforeDrop.set(this.node.position)}effectDrop(){if(this.currDropFrame<l.BOARD_DROP_FRAMES){for(let i=0;i<5;i++)this.diamondList[i].active=!1;if(this.springTop.active){this.springHelix.active=!1;const i=this.springTop.position;this.springTop.setPosition(i.x,i.y-l.BOARD_DROP_STEP,i.z)}I.set(this.node.position),I.y-=l.BOARD_DROP_STEP,this.node.setPosition(I),this.setCenterPos(),this.currDropFrame++}}initDiamond(){for(let i=0;i<5;i++)this.diamondList[i]=r(this.diamondPrefab),this.node.parent.addChild(this.diamondList[i]),this.diamondList[i].active=!1}setDiamondPos(){const i=new e;for(let t=0;t<5;t++)this.diamondList[t].active&&(i.set(this.node.position),i.x+=1.4*(t-2),i.y+=l.BOARD_HEIGTH,this.diamondList[t].setPosition(i))}hideDiamond(i){this.diamondList[i].active=!1}checkDiamond(i){if(this.hasDiamond){let t=!0;for(let e=0;e<5;e++)this.diamondList[e].active&&(t=!1,Math.abs(i-this.diamondList[e].position.x)<=l.DIAMOND_SCORE_AREA&&(l.game.ball.playDiamondParticle(this.diamondList[e].position),this.hideDiamond(e),l.game.addScore(l.DIAMOND_SCORE)));t&&(this.hasDiamond=!1)}}effectDiamondRotate(){for(let i=0;i<5;i++){const t=this.diamondList[i].eulerAngles;this.diamondList[i].eulerAngles=new e(t.x,t.y+l.DIAMOND_ROTATE_STEP_Y,t.z)}}initSpring(){this.springHelix=r(this.springHelixPrefab),this.springHelixOriginScale=this.springHelix.getScale(),this.springHelix.setScale(1.5,1,1.5),this.node.parent.addChild(this.springHelix),this.springHelix.active=!1,this.currSpringFrame=2*l.BOARD_SPRING_FRAMES,this.springTop=r(this.springTopPrefab),this.node.parent.addChild(this.springTop),this.springTop.active=!1;const i=this.node.position.clone();i.y+=(l.BOARD_HEIGTH+l.SPRING_HEIGHT)/2,this.springTop.setPosition(i),this.setSpringPos()}setSpring(){this.currSpringFrame=0,this.setSpringPos(),this.springHelix.setScale(1.5,1,1.5),this.springHelix.active=!0,this.springTop.active=!0}setSpringPos(){let i=this.node.position.clone();i.y+=l.BOARD_HEIGTH/2,this.springHelix.setPosition(i),i=this.node.position.clone(),i.y+=(l.BOARD_HEIGTH+l.SPRING_HEIGHT)/2,this.springTop.setPosition(i)}effectSpring(){const i=this.type===l.BOARD_TYPE.SPRINT?l.SPRING_HELIX_STEP_SPIRNT:l.SPRING_HELIX_STEP,t=this.type===l.BOARD_TYPE.SPRINT?l.SPRING_TOP_STEP_SPRINT:l.SPRING_TOP_STEP,e=this.springHelix.scale,s=this.springTop.position;this.currSpringFrame<l.BOARD_SPRING_FRAMES?(this.springHelix.setScale(e.x,e.y+i,e.z),this.springTop.setPosition(s.x,s.y+t,s.z),this.currSpringFrame++):this.currSpringFrame>=l.BOARD_SPRING_FRAMES&&this.currSpringFrame<2*l.BOARD_SPRING_FRAMES?(this.springHelix.setScale(e.x,e.y-i,e.z),this.springTop.setPosition(s.x,s.y-t,s.z),this.currSpringFrame++):this.springHelix.active=!1}setBump(){this.currBumpFrame=0}effectBump(){if(this.currBumpFrame<l.BOARD_BUMP_FRAMES){const i=this.node.position;this.node.setPosition(i.x,i.y+l.BOARD_BUMP_STEP[this.currBumpFrame],i.z),this.setCenterPos(),this.currBumpFrame++}}initCenter(){this.center=r(this.centerPrefab),this.node.parent.addChild(this.center),this.center.active=!1}setCenterPos(){const i=this.node.position.clone();i.y+=l.BOARD_HEIGTH/2,this.center.setPosition(i)}initWave(){this.wave=r(this.wavePrefab),this.node.parent.addChild(this.wave),this.wave.active=!1,this.waveInner=r(this.wavePrefab),this.node.parent.addChild(this.waveInner),this.waveInner.active=!1,this.currWaveFrame=l.BOARD_WAVE_FRAMES,this.waveOriginScale.set(this.wave.scale)}setWave(){if(this.type!=l.BOARD_TYPE.GIANT){this.currWaveFrame=0;const i=this.node.position.clone();i.y+=l.WAVE_OFFSET_Y,this.wave.setPosition(i),this.wave.setScale(this.waveOriginScale.clone()),this.wave.active=!0;const t=this.wave.getComponent(a).material.passes[0],e=t.getHandle("color"),s=new h("#dadada");s.a=127,t.setUniform(e,s),this.waveInner.setPosition(i),this.waveInner.setScale(this.waveOriginScale.clone())}}effectWave(){if(this.currWaveFrame<l.BOARD_WAVE_FRAMES){if(this.currWaveFrame>=l.BOARD_WAVE_INNER_START_FRAMES){this.waveInner.active||(this.waveInner.active=!0);const i=this.waveInner.getComponent(a).material.passes[0],t=i.getHandle("color"),e=new h("#dadada");e.a=127-127*Math.sin(.05*this.currWaveFrame),i.setUniform(t,e);const s=this.waveInner.getScale();this.waveInner.setScale(s.x+l.BOARD_WAVE_INNER_STEP,s.y,s.z+l.BOARD_WAVE_INNER_STEP)}const i=this.wave.getComponent(a).material.passes[0],t=i.getHandle("color"),e=new h("#dadada");e.a=127-127*Math.sin(.1*this.currWaveFrame),i.setUniform(t,e);const s=this.waveInner.getScale();this.wave.setScale(s.x+l.BOARD_WAVE_STEP,s.y,s.z+l.BOARD_WAVE_STEP),this.currWaveFrame++}else this.wave.active=!1,this.waveInner.active=!1}getHeight(){return this.type===l.BOARD_TYPE.DROP?l.BOARD_HEIGTH*l.BOARD_HEIGTH_SCALE_DROP:l.BOARD_HEIGTH}getRadius(){return this.type===l.BOARD_TYPE.GIANT?l.BOARD_RADIUS*l.BOARD_RADIUS_SCALE_GIANT:l.BOARD_RADIUS}setMove(i){const t=d.getDiffCoeff(i,1,10);return Math.random()*t>5}effectMove(){if(this.isMoving){var i=this.node.getPosition().clone(),t=i.x;this.isMovingRight&&t<=l.SCENE_MAX_OFFSET_X?(t+=l.BOARD_MOVING_STEP,this.node.setPosition(t,i.y,i.z)):this.isMovingRight&&t>l.SCENE_MAX_OFFSET_X?this.isMovingRight=!1:!this.isMovingRight&&t>=-l.SCENE_MAX_OFFSET_X?(t-=l.BOARD_MOVING_STEP,this.node.setPosition(t,i.y,i.z)):!this.isMovingRight&&t<-l.SCENE_MAX_OFFSET_X&&(this.isMovingRight=!0),this.type===l.BOARD_TYPE.SPRING&&(this.springHelix.setPosition(this.node.position.x,this.springHelix.position.y,this.springHelix.position.z),this.springTop.setPosition(this.node.position.x,this.springTop.position.y,this.springTop.position.z)),this.setCenterPos(),this.hasDiamond&&this.setDiamondPos()}}revive(){this.isActive=!1,this.isMoving=!1,this.type===l.BOARD_TYPE.DROP&&(this.currDropFrame=l.BOARD_DROP_FRAMES,this.node.setPosition(this.posBeforeDrop))}}).prototype,"diamondPrefab",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=p(m.prototype,"centerPrefab",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=p(m.prototype,"wavePrefab",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=p(m.prototype,"springTopPrefab",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=p(m.prototype,"springHelixPrefab",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=m))||A));t._RF.pop()}}}));

System.register("chunks:///_virtual/NetworkConfig.ts",["cc"],(function(T){"use strict";var t;return{setters:[function(T){t=T.cclegacy}],execute:function(){t._RF.push({},"ced76c5iAZAAoZmvD8iKYnT","NetworkConfig",void 0);class e{}T("default",e),e.HTTP_TIMOUT=5e3,e.HTTP_RETRY_INTERVAL=3e3,e.HTTP_SCHEME="http",e.HTTP_HOST="mock-api.com",e.HTTP_PORT="",e.DYNAMIC_HTTP_HOST=e.HTTP_HOST,e.DYNAMIC_HTTP_PORT=e.HTTP_PORT,t._RF.pop()}}}));

System.register("chunks:///_virtual/constants.ts",["cc"],(function(_){"use strict";var A,R;return{setters:[function(_){A=_.cclegacy,R=_.Vec3}],execute:function(){var E,S,P,O;A._RF.push({},"d9bbf8RNxZP/qHAzCKjmpIn","constants",void 0),function(_){_[_.NORMAL=0]="NORMAL",_[_.SPRING=1]="SPRING",_[_.DROP=2]="DROP",_[_.GIANT=3]="GIANT",_[_.SPRINT=4]="SPRINT"}(E||(E={})),function(_){_[_.READY=1]="READY",_[_.PLAYING=2]="PLAYING",_[_.PAUSE=3]="PAUSE",_[_.OVER=4]="OVER"}(S||(S={})),function(_){_.RESTART="restart",_.REVIVE="revive",_.ADDSCORE="add-score",_.DYING="dying",_.HIDETIPS="hide-tips"}(P||(P={})),function(_){_[_.JUMPUP=1]="JUMPUP",_[_.FALLDOWN=2]="FALLDOWN",_[_.SPRINT=3]="SPRINT"}(O||(O={}));class I{}_("Constants",I),I.COEFF_POS_BALL=8/360,I.PLAYER_MAX_DOWN_FRAMES=40,I.MAX_SCORE=0,I.SCORE_BOARD_CENTER=2,I.SCORE_BOARD_NOT_CENTER=1,I.BOARD_INIT_POS=new R(0,10,0),I.BOARD_NUM=6,I.BOARD_NEW_INDEX=2,I.BOARD_HEIGTH=.25,I.BOARD_RADIUS=1.5,I.BOARD_HEIGTH_SCALE_DROP=.5,I.BOARD_RADIUS_SCALE_GIANT=2.8,I.BOARD_GAP=4.3,I.BOARD_GAP_SPRING=9,I.BOARD_GAP_SPRINT=192,I.BOARD_SCALE_GIANT=2.8,I.SCENE_MAX_OFFSET_X=3.5,I.BOARD_TYPE=E,I.BOARD_DROP_FRAMES=40,I.BOARD_DROP_STEP=.5,I.BOARD_RADIUS_CENTER=.35,I.BOARD_SPRING_FRAMES=10,I.BOARD_WAVE_FRAMES=16,I.BOARD_WAVE_INNER_START_FRAMES=8,I.BOARD_WAVE_INNER_STEP=.24,I.BOARD_WAVE_STEP=2.25,I.BOARD_MOVING_STEP=.03,I.SPRING_HEIGHT=.2,I.SPRING_HELIX_STEP=.5,I.SPRING_HELIX_STEP_SPIRNT=1.2,I.SPRING_TOP_STEP=.25,I.SPRING_TOP_STEP_SPRINT=.5,I.WAVE_OFFSET_Y=.065,I.CAMERA_INIT_POS=new R(0,15,22),I.CAMERA_INIT_ROT=new R(-11,0,0),I.CAMERA_MOVE_X_FRAMES=20,I.CAMERA_MOVE_Y_FRAMES=15,I.CAMERA_MOVE_Y_FRAMES_SPRING=23,I.CAMERA_MOVE_MINI_ERR=.02,I.CAMERA_OFFSET_Y=10,I.CAMERA_OFFSET_Y_SPRINT=15,I.BOARD_BUMP_FRAMES=10,I.BOARD_BUMP_STEP=[-.15,-.1,-.07,-.02,-.003,.003,.02,.07,.1,.15],I.GAME_STATE=S,I.GAME_EVENT=P,I.BALL_RADIUS=.5,I.BALL_JUMP_STATE=O,I.BALL_JUMP_FRAMES=20,I.BALL_JUMP_FRAMES_SPRING=27,I.BALL_JUMP_FRAMES_SPRINT=240,I.BALL_JUMP_STEP=[.8,.6,.5,.4,.3,.2,.15,.1,.05,.03],I.BALL_JUMP_STEP_SPRING=[1.2,.8,.6,.4,.3,.2,.15,.1,.05],I.BALL_JUMP_STEP_SPRINT=.8,I.BALL_SPRINT_STEP_Y=10,I.DIAMOND_NUM=10,I.DIAMOND_PIECE_NUM=10,I.DIAMOND_RADIUS=.3,I.DIAMOND_ROTATE_STEP_Y=1.5,I.DIAMOND_SCORE=1,I.DIAMOND_SCORE_AREA=.6,I.DIAMOND_SPRINT_SCORE_AREA=1,I.DIAMOND_SPRINT_STEP_Y=4,I.DIAMOND_START_FRAME=6,I.normalDt=1/60,A._RF.pop()}}}));

System.register("chunks:///_virtual/utils.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"dddce/2a/tOSLUiRKNMAQVd","utils",void 0);t("utils",{getDiffCoeff:function(t,e,n){return(n*t+1)/(1*t+((n+1)/e-1))},getRandomInt:function(t,e){var n=Math.random()*(e-t+1)+t;return Math.floor(n)}});e._RF.pop()}}}));

System.register("chunks:///_virtual/pool-manager.ts",["cc"],(function(t){"use strict";var e,o,i,s;return{setters:[function(t){e=t.cclegacy,o=t._decorator,i=t.instantiate,s=t.NodePool}],execute:function(){var c;e._RF.push({},"f92c3xOcsdMEKh7W/84QPrD","pool-manager",void 0);const{ccclass:n,property:r}=o;t("PoolManager",n("PoolManager")(c=class t{constructor(){this.dictPool={},this.dictPrefab={}}static get instance(){return this._instance||(this._instance=new t),this._instance}getNode(t,e){let o=t.data.name;this.dictPrefab[o]=t;let c=null;if(this.dictPool.hasOwnProperty(o)){let e=this.dictPool[o];c=e.size()>0?e.get():i(t)}else{let e=new s;this.dictPool[o]=e,c=i(t)}return c.parent=e,c}putNode(t){let e=t.name,o=null;this.dictPool.hasOwnProperty(e)?o=this.dictPool[e]:(o=new s,this.dictPool[e]=o),o.put(t)}clearPool(t){if(this.dictPool.hasOwnProperty(t)){this.dictPool[t].clear()}}})||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/splash.ts",["cc","./GameManager.ts"],(function(e){"use strict";var t,s,a,o,r,n;return{setters:[function(e){t=e.cclegacy,s=e.Component,a=e.sys,o=e.director,r=e._decorator},function(e){n=e.default}],execute:function(){var p;t._RF.push({},"f99b1wDIRhO15+1aWRsxo0O","splash",void 0);const{ccclass:c,property:i}=r;e("Splash",c("Splash")(p=class extends s{onLoad(){n.drive(),a.isNative?n.hotUpdateHelper.checkUpdate((e=>{n.logHelper.log("热更返回消息为："+JSON.stringify(e));let t=!1,s=0;e.hasOwnProperty("needHotUpdate")&&(t=e.needHotUpdate),t?e.hasOwnProperty("progress")&&(s=e.progress,n.logHelper.log("当前进度为："+s)):this.inShadow()})):this.inShadow()}inShadow(){o.loadScene("main")}onEnable(){}start(){}update(e){}lateUpdate(e){}onDisable(){}onDestroy(){}})||p);t._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./update-value-label.ts","./StorageHelper.ts","./UtillHelper.ts","./LogerHelper.ts","./HotUpdateConfig.ts","./HotUpdateHelper.ts","./GameManager.ts","./NetworkConfig.ts","./HttpHelper.ts","./NetworkHelper.ts","./constants.ts","./utils.ts","./board-manager.ts","./revive.ts","./page-result.ts","./ui-manager.ts","./audio-manager.ts","./pool-manager.ts","./ball.ts","./camera-ctrl.ts","./game.ts","./page-start.ts","./migrate-canvas.ts","./board.ts","./splash.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});